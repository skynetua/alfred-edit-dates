<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>bundleid</key>
	<string></string>
	<key>connections</key>
	<dict>
		<key>2D996A5F-76DB-4596-BAC7-C918B0EFD902</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>D307CADD-36C3-4EF0-98C3-1CA47407436A</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>3263DF37-2A1F-486F-BCC1-E902E59320DC</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>D6AD9678-C017-40CD-BD91-5E4102C39AD3</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>4B30C050-DEC1-4375-8B11-20FA04A89596</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>2D996A5F-76DB-4596-BAC7-C918B0EFD902</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
			<dict>
				<key>destinationuid</key>
				<string>4F542EDC-0D2D-48F5-9593-5A78470AFEE4</string>
				<key>modifiers</key>
				<integer>1048576</integer>
				<key>modifiersubtext</key>
				<string>Reopen Universal Actions after renaming</string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>4F542EDC-0D2D-48F5-9593-5A78470AFEE4</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>2D996A5F-76DB-4596-BAC7-C918B0EFD902</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>A6B5E6E1-D926-4D07-A505-6821DDD8AD23</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>9D441C22-CD20-4CCA-8CF2-8AC879F994A1</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>sourceoutputuid</key>
				<string>084A03F0-9303-4D0B-8E6A-1969BC7CB1DE</string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>D307CADD-36C3-4EF0-98C3-1CA47407436A</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>D6AD9678-C017-40CD-BD91-5E4102C39AD3</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
			<dict>
				<key>destinationuid</key>
				<string>3263DF37-2A1F-486F-BCC1-E902E59320DC</string>
				<key>modifiers</key>
				<integer>1048576</integer>
				<key>modifiersubtext</key>
				<string>Reopen Universal Actions after renaming</string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>D6AD9678-C017-40CD-BD91-5E4102C39AD3</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>A6B5E6E1-D926-4D07-A505-6821DDD8AD23</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>E0F5E5B0-C433-4627-BFB5-8E7821D6F7CE</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>2D996A5F-76DB-4596-BAC7-C918B0EFD902</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
	</dict>
	<key>createdby</key>
	<string>Oleksandr Kapshuk</string>
	<key>description</key>
	<string>Change file's created or modified dates</string>
	<key>disabled</key>
	<false/>
	<key>name</key>
	<string>Edit dates</string>
	<key>objects</key>
	<array>
		<dict>
			<key>config</key>
			<dict>
				<key>action</key>
				<integer>0</integer>
				<key>argument</key>
				<integer>1</integer>
				<key>focusedappvariable</key>
				<false/>
				<key>focusedappvariablename</key>
				<string></string>
				<key>hotkey</key>
				<integer>-1</integer>
				<key>hotmod</key>
				<integer>524288</integer>
				<key>hotstring</key>
				<string>double tap</string>
				<key>leftcursor</key>
				<false/>
				<key>modsmode</key>
				<integer>0</integer>
				<key>relatedApps</key>
				<array>
					<string>com.apple.finder</string>
				</array>
				<key>relatedAppsMode</key>
				<integer>1</integer>
			</dict>
			<key>type</key>
			<string>alfred.workflow.trigger.hotkey</string>
			<key>uid</key>
			<string>E0F5E5B0-C433-4627-BFB5-8E7821D6F7CE</string>
			<key>version</key>
			<integer>2</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>concurrently</key>
				<false/>
				<key>escaping</key>
				<integer>0</integer>
				<key>script</key>
				<string>newDate=$(python3 -c "from datetime import datetime; print(datetime.strptime('${1}', '%Y-%m-%d %H:%M').strftime('%Y%m%d%H%M.%S'))")


# Rename
touch -t "$newDate" "${file}"

# Send to reopen Universal Actions
echo -n "${file}"</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>type</key>
				<integer>0</integer>
			</dict>
			<key>type</key>
			<string>alfred.workflow.action.script</string>
			<key>uid</key>
			<string>D6AD9678-C017-40CD-BD91-5E4102C39AD3</string>
			<key>version</key>
			<integer>2</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>alfredfiltersresults</key>
				<false/>
				<key>alfredfiltersresultsmatchmode</key>
				<integer>0</integer>
				<key>argumenttreatemptyqueryasnil</key>
				<true/>
				<key>argumenttrimmode</key>
				<integer>0</integer>
				<key>argumenttype</key>
				<integer>0</integer>
				<key>escaping</key>
				<integer>68</integer>
				<key>queuedelaycustom</key>
				<integer>3</integer>
				<key>queuedelayimmediatelyinitially</key>
				<true/>
				<key>queuedelaymode</key>
				<integer>0</integer>
				<key>queuemode</key>
				<integer>1</integer>
				<key>runningsubtext</key>
				<string>Please wait…</string>
				<key>script</key>
				<string>import os
import sys
import re
import json

def env_var(var_name):
    return os.environ.get(var_name)

def run(argv):
    new_date = argv[0]

    orig_date = env_var("origDate")

    if new_date == orig_date:
        return json.dumps({ "items": [{
            "title": "Set new date",
            "subtitle": "Date is the same",
            "valid": False
        }]})

    if not re.match(r'^\d{4}-\d{2}-\d{2} \d{2}:\d{2}$', new_date):
        return json.dumps({ "items": [{
            "title": "Set new date",
            "subtitle": "Date format is wrong",
            "valid": False
        }]})

    return json.dumps({ "items": [{
        "title": "Change created date",
        "subtitle": f"{orig_date} -&gt; {new_date}",
        "valid": True,
        "arg": new_date
    },{
        "title": "Change modified date",
        "subtitle": f"{orig_date} -&gt; {new_date}",
        "valid": True,
        "arg": new_date
    }]})

if __name__ == "__main__":
    arguments = sys.argv[1:]
    print(run(arguments))
</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>subtext</key>
				<string></string>
				<key>title</key>
				<string>Set new date</string>
				<key>type</key>
				<integer>9</integer>
				<key>withspace</key>
				<false/>
			</dict>
			<key>type</key>
			<string>alfred.workflow.input.scriptfilter</string>
			<key>uid</key>
			<string>D307CADD-36C3-4EF0-98C3-1CA47407436A</string>
			<key>version</key>
			<integer>3</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>jumpto</key>
				<string>_popUpItemAction:</string>
				<key>path</key>
				<string></string>
				<key>type</key>
				<integer>1</integer>
			</dict>
			<key>type</key>
			<string>alfred.workflow.action.actioninalfred</string>
			<key>uid</key>
			<string>9D441C22-CD20-4CCA-8CF2-8AC879F994A1</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>acceptsmulti</key>
				<integer>0</integer>
				<key>filetypes</key>
				<array/>
				<key>name</key>
				<string>Edit dates</string>
			</dict>
			<key>type</key>
			<string>alfred.workflow.trigger.action</string>
			<key>uid</key>
			<string>4B30C050-DEC1-4375-8B11-20FA04A89596</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>concurrently</key>
				<false/>
				<key>escaping</key>
				<integer>68</integer>
				<key>script</key>
				<string>#!/usr/bin/env python3
import sys
import os
import json
from datetime import datetime

def get_file_modification_date(file_path):
    try:
        modification_time = os.path.getmtime(file_path)
        modification_date = datetime.fromtimestamp(modification_time).strftime('%Y-%m-%d %H:%M')
        return modification_date
    except OSError:
        return ""

def main():
    file_path = sys.argv[1] if len(sys.argv) &gt; 1 else None

    if not file_path:
        result = {
            "alfredworkflow": {
                "title": "No file found",
                "valid": "false"
                }
            }
    else:
        modification_date = get_file_modification_date(file_path)
        result = {
            "alfredworkflow": {
                "arg": modification_date,
                "variables": {
                    "file": file_path,
                    "origDate": modification_date
                }
            }
        }
    print(json.dumps(result))

if __name__ == "__main__":
    main()</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>type</key>
				<integer>9</integer>
			</dict>
			<key>type</key>
			<string>alfred.workflow.action.script</string>
			<key>uid</key>
			<string>2D996A5F-76DB-4596-BAC7-C918B0EFD902</string>
			<key>version</key>
			<integer>2</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>conditions</key>
				<array>
					<dict>
						<key>inputstring</key>
						<string>{var:reopen_ua}</string>
						<key>matchcasesensitive</key>
						<false/>
						<key>matchmode</key>
						<integer>5</integer>
						<key>matchstring</key>
						<string></string>
						<key>outputlabel</key>
						<string>Reopen Universal Actions</string>
						<key>uid</key>
						<string>084A03F0-9303-4D0B-8E6A-1969BC7CB1DE</string>
					</dict>
				</array>
				<key>elselabel</key>
				<string>else</string>
				<key>hideelse</key>
				<true/>
			</dict>
			<key>type</key>
			<string>alfred.workflow.utility.conditional</string>
			<key>uid</key>
			<string>A6B5E6E1-D926-4D07-A505-6821DDD8AD23</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>argument</key>
				<string>{query}</string>
				<key>passthroughargument</key>
				<false/>
				<key>variables</key>
				<dict>
					<key>reopen_ua</key>
					<string>true</string>
				</dict>
			</dict>
			<key>type</key>
			<string>alfred.workflow.utility.argument</string>
			<key>uid</key>
			<string>3263DF37-2A1F-486F-BCC1-E902E59320DC</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>argument</key>
				<string>{query}</string>
				<key>passthroughargument</key>
				<false/>
				<key>variables</key>
				<dict>
					<key>reopen_ua</key>
					<string>true</string>
				</dict>
			</dict>
			<key>type</key>
			<string>alfred.workflow.utility.argument</string>
			<key>uid</key>
			<string>4F542EDC-0D2D-48F5-9593-5A78470AFEE4</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
	</array>
	<key>readme</key>
	<string>Alfred Universal Action workflow for edit file's created or modified date.

## Usage
Change a file's created or nodified dates using [Universal Action](https://www.alfredapp.com/help/features/universal-actions/).

![Select action](images/select.png)

![Set new date](images/change.png)

Press &lt;kbd&gt;⌘&lt;/kbd&gt;&lt;kbd&gt;↩&lt;/kbd&gt; at any state to reopen the Universal Actions panel after renaming.

Also hotkey may be assigned to trigger action for file focused in Finder.</string>
	<key>uidata</key>
	<dict>
		<key>2D996A5F-76DB-4596-BAC7-C918B0EFD902</key>
		<dict>
			<key>xpos</key>
			<real>330</real>
			<key>ypos</key>
			<real>155</real>
		</dict>
		<key>3263DF37-2A1F-486F-BCC1-E902E59320DC</key>
		<dict>
			<key>xpos</key>
			<real>655</real>
			<key>ypos</key>
			<real>250</real>
		</dict>
		<key>4B30C050-DEC1-4375-8B11-20FA04A89596</key>
		<dict>
			<key>xpos</key>
			<real>65</real>
			<key>ypos</key>
			<real>155</real>
		</dict>
		<key>4F542EDC-0D2D-48F5-9593-5A78470AFEE4</key>
		<dict>
			<key>xpos</key>
			<real>240</real>
			<key>ypos</key>
			<real>250</real>
		</dict>
		<key>9D441C22-CD20-4CCA-8CF2-8AC879F994A1</key>
		<dict>
			<key>xpos</key>
			<real>975</real>
			<key>ypos</key>
			<real>155</real>
		</dict>
		<key>A6B5E6E1-D926-4D07-A505-6821DDD8AD23</key>
		<dict>
			<key>xpos</key>
			<real>895</real>
			<key>ypos</key>
			<real>185</real>
		</dict>
		<key>D307CADD-36C3-4EF0-98C3-1CA47407436A</key>
		<dict>
			<key>xpos</key>
			<real>485</real>
			<key>ypos</key>
			<real>155</real>
		</dict>
		<key>D6AD9678-C017-40CD-BD91-5E4102C39AD3</key>
		<dict>
			<key>xpos</key>
			<real>745</real>
			<key>ypos</key>
			<real>155</real>
		</dict>
		<key>E0F5E5B0-C433-4627-BFB5-8E7821D6F7CE</key>
		<dict>
			<key>xpos</key>
			<real>65</real>
			<key>ypos</key>
			<real>25</real>
		</dict>
	</dict>
	<key>userconfigurationconfig</key>
	<array/>
	<key>version</key>
	<string>1.0.0</string>
	<key>webaddress</key>
	<string></string>
</dict>
</plist>
